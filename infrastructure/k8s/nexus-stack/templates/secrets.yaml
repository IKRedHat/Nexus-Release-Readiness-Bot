{{/*
Orchestrator Secrets
*/}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nexus-stack.fullname" . }}-orchestrator-secrets
  labels:
    {{- include "nexus-stack.labels" . | nindent 4 }}
type: Opaque
stringData:
  NEXUS_JWT_SECRET: {{ .Values.orchestrator.secrets.NEXUS_JWT_SECRET | default "change-me-in-production" | quote }}
  LLM_API_KEY: {{ .Values.orchestrator.secrets.LLM_API_KEY | default "" | quote }}
  POSTGRES_PASSWORD: {{ .Values.orchestrator.secrets.POSTGRES_PASSWORD | default "nexus" | quote }}
---
{{/*
Jira Agent Secrets
*/}}
{{- if .Values.jiraAgent.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nexus-stack.fullname" . }}-jira-agent-secrets
  labels:
    {{- include "nexus-stack.labels" . | nindent 4 }}
type: Opaque
stringData:
  JIRA_URL: {{ .Values.jiraAgent.secrets.JIRA_URL | default "" | quote }}
  JIRA_USERNAME: {{ .Values.jiraAgent.secrets.JIRA_USERNAME | default "" | quote }}
  JIRA_API_TOKEN: {{ .Values.jiraAgent.secrets.JIRA_API_TOKEN | default "" | quote }}
{{- end }}
---
{{/*
Git/CI Agent Secrets
*/}}
{{- if .Values.gitCiAgent.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nexus-stack.fullname" . }}-git-ci-agent-secrets
  labels:
    {{- include "nexus-stack.labels" . | nindent 4 }}
type: Opaque
stringData:
  GITHUB_TOKEN: {{ .Values.gitCiAgent.secrets.GITHUB_TOKEN | default "" | quote }}
  JENKINS_URL: {{ .Values.gitCiAgent.secrets.JENKINS_URL | default "" | quote }}
  JENKINS_USERNAME: {{ .Values.gitCiAgent.secrets.JENKINS_USERNAME | default "" | quote }}
  JENKINS_API_TOKEN: {{ .Values.gitCiAgent.secrets.JENKINS_API_TOKEN | default "" | quote }}
{{- end }}
---
{{/*
Reporting Agent Secrets
*/}}
{{- if .Values.reportingAgent.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nexus-stack.fullname" . }}-reporting-agent-secrets
  labels:
    {{- include "nexus-stack.labels" . | nindent 4 }}
type: Opaque
stringData:
  CONFLUENCE_URL: {{ .Values.reportingAgent.secrets.CONFLUENCE_URL | default "" | quote }}
  CONFLUENCE_USERNAME: {{ .Values.reportingAgent.secrets.CONFLUENCE_USERNAME | default "" | quote }}
  CONFLUENCE_API_TOKEN: {{ .Values.reportingAgent.secrets.CONFLUENCE_API_TOKEN | default "" | quote }}
{{- end }}
---
{{/*
Slack Agent Secrets
*/}}
{{- if .Values.slackAgent.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nexus-stack.fullname" . }}-slack-agent-secrets
  labels:
    {{- include "nexus-stack.labels" . | nindent 4 }}
type: Opaque
stringData:
  SLACK_BOT_TOKEN: {{ .Values.slackAgent.secrets.SLACK_BOT_TOKEN | default "" | quote }}
  SLACK_SIGNING_SECRET: {{ .Values.slackAgent.secrets.SLACK_SIGNING_SECRET | default "" | quote }}
  SLACK_APP_TOKEN: {{ .Values.slackAgent.secrets.SLACK_APP_TOKEN | default "" | quote }}
{{- end }}
---
{{/*
Jira Hygiene Agent Secrets
*/}}
{{- if .Values.jiraHygieneAgent.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nexus-stack.fullname" . }}-jira-hygiene-agent-secrets
  labels:
    {{- include "nexus-stack.labels" . | nindent 4 }}
type: Opaque
stringData:
  JIRA_URL: {{ .Values.jiraHygieneAgent.secrets.JIRA_URL | default "" | quote }}
  JIRA_USERNAME: {{ .Values.jiraHygieneAgent.secrets.JIRA_USERNAME | default "" | quote }}
  JIRA_API_TOKEN: {{ .Values.jiraHygieneAgent.secrets.JIRA_API_TOKEN | default "" | quote }}
{{- end }}

