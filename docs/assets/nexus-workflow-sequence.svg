<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" width="1200" height="800">
  <defs>
    <!-- Gradients -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    
    <linearGradient id="userGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f43f5e"/>
      <stop offset="100%" style="stop-color:#e11d48"/>
    </linearGradient>
    
    <linearGradient id="slackGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4ade80"/>
      <stop offset="100%" style="stop-color:#22c55e"/>
    </linearGradient>
    
    <linearGradient id="orchGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#818cf8"/>
      <stop offset="100%" style="stop-color:#6366f1"/>
    </linearGradient>
    
    <linearGradient id="llmGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#c084fc"/>
      <stop offset="100%" style="stop-color:#a855f7"/>
    </linearGradient>
    
    <linearGradient id="agentGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#22d3ee"/>
      <stop offset="100%" style="stop-color:#06b6d4"/>
    </linearGradient>
    
    <linearGradient id="extGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24"/>
      <stop offset="100%" style="stop-color:#f59e0b"/>
    </linearGradient>
    
    <!-- Filters -->
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="shadow">
      <feDropShadow dx="0" dy="4" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/>
    </filter>
    
    <!-- Arrows -->
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#6366f1"/>
    </marker>
    
    <marker id="arrowGreen" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#22c55e"/>
    </marker>
    
    <marker id="arrowCyan" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#06b6d4"/>
    </marker>
    
    <marker id="arrowOrange" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#f59e0b"/>
    </marker>
    
    <marker id="arrowPurple" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#a855f7"/>
    </marker>
  </defs>
  
  <style>
    @keyframes dash {
      to { stroke-dashoffset: -40; }
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    @keyframes slideRight {
      0% { transform: translateX(-20px); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }
    @keyframes dot {
      0%, 20% { opacity: 0; }
      40% { opacity: 1; }
      100% { opacity: 0; }
    }
    .flow-arrow { 
      stroke-dasharray: 10 5; 
      animation: dash 1s linear infinite; 
    }
    .participant { filter: url(#shadow); }
    .pulse { animation: pulse 2s ease-in-out infinite; }
    .message-dot { animation: dot 2s ease-in-out infinite; }
  </style>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bgGrad)"/>
  
  <!-- Grid -->
  <g opacity="0.05">
    <pattern id="grid" width="30" height="30" patternUnits="userSpaceOnUse">
      <path d="M 30 0 L 0 0 0 30" fill="none" stroke="#fff" stroke-width="1"/>
    </pattern>
    <rect width="100%" height="100%" fill="url(#grid)"/>
  </g>
  
  <!-- Title -->
  <g filter="url(#glow)">
    <text x="600" y="45" font-family="'Segoe UI', Arial, sans-serif" font-size="28" font-weight="bold" fill="#fff" text-anchor="middle">
      üîÑ NEXUS WORKFLOW SEQUENCE
    </text>
    <text x="600" y="70" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">
      Real-time data flow from user query to intelligent response
    </text>
  </g>
  
  <!-- ============================================ -->
  <!-- PARTICIPANTS (Swimlanes) -->
  <!-- ============================================ -->
  
  <!-- Participant Headers -->
  <g id="participantHeaders" transform="translate(0, 90)">
    <!-- User -->
    <g class="participant">
      <rect x="40" y="0" width="120" height="50" rx="25" fill="url(#userGrad)" filter="url(#glow)"/>
      <text x="100" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">üë§ User</text>
    </g>
    
    <!-- Slack Agent -->
    <g class="participant">
      <rect x="220" y="0" width="140" height="50" rx="25" fill="url(#slackGrad)" filter="url(#glow)"/>
      <text x="290" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">üí¨ Slack Agent</text>
    </g>
    
    <!-- Orchestrator -->
    <g class="participant pulse">
      <rect x="420" y="0" width="160" height="50" rx="25" fill="url(#orchGrad)" filter="url(#glow)"/>
      <text x="500" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">üß† Orchestrator</text>
    </g>
    
    <!-- LLM -->
    <g class="participant">
      <rect x="640" y="0" width="140" height="50" rx="25" fill="url(#llmGrad)" filter="url(#glow)"/>
      <text x="710" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">ü§ñ Gemini LLM</text>
    </g>
    
    <!-- Agents -->
    <g class="participant">
      <rect x="840" y="0" width="140" height="50" rx="25" fill="url(#agentGrad)" filter="url(#glow)"/>
      <text x="910" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">üîß Agents</text>
    </g>
    
    <!-- External -->
    <g class="participant">
      <rect x="1040" y="0" width="120" height="50" rx="25" fill="url(#extGrad)" filter="url(#glow)"/>
      <text x="1100" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">üåê External</text>
    </g>
  </g>
  
  <!-- Lifelines -->
  <g id="lifelines" stroke="#475569" stroke-width="2" stroke-dasharray="5 5">
    <line x1="100" y1="160" x2="100" y2="700"/>
    <line x1="290" y1="160" x2="290" y2="700"/>
    <line x1="500" y1="160" x2="500" y2="700"/>
    <line x1="710" y1="160" x2="710" y2="700"/>
    <line x1="910" y1="160" x2="910" y2="700"/>
    <line x1="1100" y1="160" x2="1100" y2="700"/>
  </g>
  
  <!-- ============================================ -->
  <!-- SEQUENCE MESSAGES -->
  <!-- ============================================ -->
  
  <!-- Step 1: User sends command -->
  <g id="step1" transform="translate(0, 170)">
    <rect x="25" y="0" width="150" height="35" rx="5" fill="#1e293b" stroke="#f43f5e" stroke-width="2"/>
    <text x="100" y="22" font-family="'Consolas', monospace" font-size="11" fill="#fda4af" text-anchor="middle">/nexus status v2.0</text>
    
    <line x1="100" y1="35" x2="280" y2="35" stroke="#f43f5e" stroke-width="2" class="flow-arrow" marker-end="url(#arrow)"/>
    <circle cx="100" cy="35" r="6" fill="#f43f5e" class="message-dot"/>
    
    <text x="190" y="28" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë† Slash Command</text>
  </g>
  
  <!-- Step 2: Slack Agent processes -->
  <g id="step2" transform="translate(0, 220)">
    <rect x="220" y="0" width="140" height="25" rx="5" fill="#22c55e" opacity="0.2" stroke="#22c55e"/>
    <text x="290" y="17" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#86efac" text-anchor="middle">Parse Command</text>
    
    <line x1="290" y1="30" x2="490" y2="30" stroke="#22c55e" stroke-width="2" class="flow-arrow" marker-end="url(#arrowGreen)"/>
    <circle cx="290" cy="30" r="6" fill="#22c55e" class="message-dot" style="animation-delay: 0.3s"/>
    
    <text x="390" y="23" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë° AgentTaskRequest</text>
  </g>
  
  <!-- Step 3: Orchestrator receives, starts ReAct -->
  <g id="step3" transform="translate(0, 265)">
    <rect x="420" y="0" width="160" height="60" rx="8" fill="#6366f1" opacity="0.2" stroke="#6366f1"/>
    <text x="500" y="20" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#a5b4fc" text-anchor="middle" font-weight="bold">ReAct Loop Start</text>
    <text x="500" y="38" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#818cf8" text-anchor="middle">Iteration 1/10</text>
    <text x="500" y="52" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#818cf8" text-anchor="middle">‚ë¢ Initialize</text>
  </g>
  
  <!-- Step 4: Orchestrator queries LLM for thinking -->
  <g id="step4" transform="translate(0, 340)">
    <line x1="500" y1="0" x2="700" y2="0" stroke="#a855f7" stroke-width="2" class="flow-arrow" marker-end="url(#arrowPurple)"/>
    <circle cx="500" cy="0" r="6" fill="#a855f7" class="message-dot" style="animation-delay: 0.6s"/>
    
    <text x="600" y="-7" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë£ Thought: "What do I need?"</text>
    
    <!-- LLM processes -->
    <rect x="640" y="10" width="140" height="40" rx="5" fill="#a855f7" opacity="0.2" stroke="#a855f7"/>
    <text x="710" y="28" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#d8b4fe" text-anchor="middle">Analyze query context</text>
    <text x="710" y="42" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#d8b4fe" text-anchor="middle">Select tools needed</text>
    
    <!-- LLM responds -->
    <line x1="700" y1="55" x2="510" y2="55" stroke="#a855f7" stroke-width="2" stroke-dasharray="5 3" marker-end="url(#arrowPurple)"/>
    <text x="600" y="68" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">Action: get_sprint_stats</text>
  </g>
  
  <!-- Step 5: Orchestrator calls Agent -->
  <g id="step5" transform="translate(0, 420)">
    <line x1="500" y1="0" x2="900" y2="0" stroke="#06b6d4" stroke-width="2" class="flow-arrow" marker-end="url(#arrowCyan)"/>
    <circle cx="500" cy="0" r="6" fill="#06b6d4" class="message-dot" style="animation-delay: 0.9s"/>
    
    <text x="700" y="-7" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë§ Tool Call: Jira Agent</text>
    
    <rect x="220" y="8" width="90" height="20" rx="3" fill="#06b6d4" opacity="0.3"/>
    <text x="265" y="22" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#67e8f9" text-anchor="middle">Jira :8081</text>
    
    <rect x="320" y="8" width="90" height="20" rx="3" fill="#06b6d4" opacity="0.15"/>
    <text x="365" y="22" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#67e8f9" text-anchor="middle">Git :8082</text>
  </g>
  
  <!-- Step 6: Agent calls External -->
  <g id="step6" transform="translate(0, 460)">
    <rect x="840" y="0" width="140" height="25" rx="5" fill="#06b6d4" opacity="0.2" stroke="#06b6d4"/>
    <text x="910" y="17" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#67e8f9" text-anchor="middle">Process Request</text>
    
    <line x1="910" y1="30" x2="1090" y2="30" stroke="#f59e0b" stroke-width="2" class="flow-arrow" marker-end="url(#arrowOrange)"/>
    <circle cx="910" cy="30" r="6" fill="#f59e0b" class="message-dot" style="animation-delay: 1.2s"/>
    
    <text x="1000" y="23" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë• REST API Call</text>
    
    <!-- External processes -->
    <rect x="1040" y="40" width="120" height="30" rx="5" fill="#f59e0b" opacity="0.2" stroke="#f59e0b"/>
    <text x="1100" y="60" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#fcd34d" text-anchor="middle">Jira Cloud API</text>
    
    <!-- External responds -->
    <line x1="1090" y1="75" x2="920" y2="75" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5 3" marker-end="url(#arrowOrange)"/>
    <text x="1000" y="88" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">Sprint Data JSON</text>
  </g>
  
  <!-- Step 7: Agent returns to Orchestrator -->
  <g id="step7" transform="translate(0, 550)">
    <line x1="900" y1="0" x2="510" y2="0" stroke="#06b6d4" stroke-width="2" stroke-dasharray="5 3" marker-end="url(#arrowCyan)"/>
    
    <text x="700" y="-7" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë¶ Observation: {completed: 42, total: 45}</text>
  </g>
  
  <!-- Step 8: Orchestrator queries LLM for final answer -->
  <g id="step8" transform="translate(0, 580)">
    <rect x="420" y="0" width="160" height="35" rx="5" fill="#6366f1" opacity="0.2" stroke="#6366f1"/>
    <text x="500" y="15" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#a5b4fc" text-anchor="middle">Loop complete</text>
    <text x="500" y="28" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#818cf8" text-anchor="middle">‚ëß Generate Response</text>
    
    <line x1="500" y1="40" x2="700" y2="40" stroke="#a855f7" stroke-width="2" class="flow-arrow" marker-end="url(#arrowPurple)"/>
    <text x="600" y="53" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">Synthesize findings</text>
    
    <line x1="700" y1="60" x2="510" y2="60" stroke="#a855f7" stroke-width="2" stroke-dasharray="5 3" marker-end="url(#arrowPurple)"/>
    <text x="600" y="73" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">Final Answer: GO ‚úÖ</text>
  </g>
  
  <!-- Step 9: Return to Slack -->
  <g id="step9" transform="translate(0, 660)">
    <line x1="490" y1="0" x2="300" y2="0" stroke="#22c55e" stroke-width="2" stroke-dasharray="5 3" marker-end="url(#arrowGreen)"/>
    <text x="390" y="-7" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë® AgentTaskResponse</text>
    
    <rect x="220" y="8" width="140" height="25" rx="5" fill="#22c55e" opacity="0.2" stroke="#22c55e"/>
    <text x="290" y="26" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#86efac" text-anchor="middle">Format Block Kit</text>
    
    <line x1="280" y1="38" x2="110" y2="38" stroke="#f43f5e" stroke-width="2" stroke-dasharray="5 3" marker-end="url(#arrow)"/>
    <text x="190" y="51" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">‚ë© Rich Response</text>
  </g>
  
  <!-- Final User Response -->
  <g id="finalResponse" transform="translate(0, 710)">
    <rect x="20" y="0" width="160" height="60" rx="8" fill="#1e293b" stroke="#22c55e" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="20" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#22c55e" text-anchor="middle" font-weight="bold">‚úÖ Release v2.0: GO</text>
    <text x="100" y="35" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">93% completion rate</text>
    <text x="100" y="50" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">All tests passing</text>
  </g>
  
  <!-- ============================================ -->
  <!-- LEGEND -->
  <!-- ============================================ -->
  <g id="legend" transform="translate(850, 710)">
    <rect x="0" y="0" width="330" height="80" rx="10" fill="#1e293b" stroke="#475569" stroke-width="1"/>
    
    <text x="165" y="20" font-family="'Segoe UI', Arial, sans-serif" font-size="12" fill="#fff" text-anchor="middle" font-weight="bold">Legend</text>
    
    <line x1="20" y1="35" x2="60" y2="35" stroke="#6366f1" stroke-width="2"/>
    <text x="70" y="40" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8">Sync Call</text>
    
    <line x1="130" y1="35" x2="170" y2="35" stroke="#6366f1" stroke-width="2" stroke-dasharray="5 3"/>
    <text x="180" y="40" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8">Response</text>
    
    <line x1="240" y1="35" x2="280" y2="35" stroke="#6366f1" stroke-width="2" class="flow-arrow"/>
    <text x="290" y="40" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8">Animated</text>
    
    <rect x="20" y="50" width="40" height="15" rx="3" fill="#6366f1" opacity="0.2" stroke="#6366f1"/>
    <text x="70" y="62" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8">Processing</text>
    
    <circle cx="145" cy="57" r="5" fill="#22c55e"/>
    <text x="160" y="62" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="#94a3b8">Data Packet</text>
    
    <text x="250" y="62" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#64748b">~2s total latency</text>
  </g>
  
  <!-- Timing annotations -->
  <g id="timing" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#64748b">
    <text x="15" y="200" transform="rotate(-90, 15, 200)">~50ms</text>
    <text x="15" y="330" transform="rotate(-90, 15, 330)">~200ms</text>
    <text x="15" y="480" transform="rotate(-90, 15, 480)">~500ms</text>
    <text x="15" y="630" transform="rotate(-90, 15, 630)">~100ms</text>
  </g>
</svg>

